<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <style>
    body{
      background: red;
      overflow: hidden;
      position: relative;
      color:white;
    }
    #hide{
      font-family: 'Press Start 2P', cursive;
      position: absolute;
      right: 0px;
      top: 0px;
      height:100;
      font-size: 28px;
      visibility: hidden;
      color:white;
    }
    span{
      bottom: 0px;
      right:0px;
      font-size: 12px;
      font-family: 'Press Start 2P', cursive;
      color: white;
    }
    </style>
  </head>

  <body>

  </body>

  <script>

    function wait(spans){
      var body = document.getElementsByTagName('body')[0]
        for (var j = 0; j < spans.length; j++){
          body.appendChild(spans[j])
        }
    }

    function test(){
      jQuery.get('/raw', function(data) {

       var entries = JSON.stringify(data)
       entries = entries.split("\\")
       entries = entries.slice(1,entries.length)
        // 3. Set up Arrays to recieve titles and posts from the txt file.
        posts = []
        // 4. posts the document up into lines and from individiaul lines into titles and posts
        var spans = []
        for (var i = 0; i < entries.length; i++){
           if (entries[i].length > 10){
            var limbs = entries[i].split("***");
            post = limbs[1]
            beginning = post.slice(0,3)
            if (beginning.indexOf("I ") !== -1){
              var result = post.match( /[^\.!\?]+[\.!\?]+/g );
              if (result != null){
                var span = document.createElement('span')
                span.textContent = result[0]
                spans.push(span)
              }
            }
          }
        }

          setTimeout(wait(spans), 3000)


    })
    }
    test()

  </script>
</html>
